# Кейс 1

<!-- toc -->

## Ситуация заказчика
У клиента реализованы монолитные продукты на виртуальных машинах. ИТ предоставляет только базовые услуги, требуются администраторы высокой квалификации в каждую команду для построения своего ландшафта. Нет единого подхода и описанных рекомендаций для быстрого старта разработки.

## Цель
Создать ландшафт максимально приближенный к возможностям облачной платформы. Имплементировать подход `Infrastructure as a Service`. Предоставлять сервисы платформы как услугу `Platform as a Service`. Обеспечить полный автоматизированный цикл разработки и доставки приложений.

## Подробный кейс и результаты работы

```admonish info
Используемый стек технологий: Kubernetes, GHES (GitHub Enterprise server), GitOps, Flux CD, Helm, Docker, Podman, SOPS, age, mdbook, CRI-O, JFrog Artifactory, cert-manager, Vault, Keycloak, Ceph, Terraform, Packer, Ansible, Python, zalando, postgres-operator, Patroni, percona-operator, MinIO, Redis, Kafka, Strimzi, ExternalDNS, PowerDNS, phpIPAM, PureLB, Ironic, Keepalived, Let's Encrypt, Metal^3^
```

### Решение

Создан продукт, который развернут в датацентрах клиента:

-   Продукт может быть развернут на виртуальной платформе, `bare metal`

-   Команды могут заказывать услуги и получать необходимый сервис.

-   Разработан концепт присутствия продукта на облачной платформе `Azure`.

-   Построен слой инфраструктурных сервисов, которые отсутствуют в
    необходимом виде в ИТ для onprem исталляций

-   Создана документация пользователя, администратора

-   Реализован подход `Git` как источник правды (`GitOps`) с применением
    `Pull` модели

-   Построен монорепозиторий для команд с описанием правил разработки

-   Разработаны необходимые `workflow` для автоматизации операций сборки,
    деплоя в монорепозитории.

-   Использован `Kubernetes` для оркестрации контейнеров

-   Максимально использованы операторы для реализации услуг как сервис

-   В качестве persistent для платформы оркестрации сервисов развернут
    `Ceph`

-   Использован `Keycloak` для авторизации и аутентификации.

### Результат
- Продукт упростил работу администраторов команд,предоставив им облачный сервис.
- Команды могут получать сервисы (базы данных, бэкап баз, стриминговые сервисы, кэши, выделенные IP адреса балансировщиков, итд) как услугу.
- Время получения услуги сократилось с дней до минут. Разработка может вестись в монорепозитории с четко описанными правилами и структурой. Это ускорило работу разработчиков.
- Общение с Инфраструктурой сведено к минимуму. Количество оформленных услуг в ИТ уменьшилось в три раза.
